(this.webpackJsonpzio_setup=this.webpackJsonpzio_setup||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/device_connecting.c594fc6a.svg"},107:function(e,t,a){e.exports=a.p+"static/media/warning_icon.e0e4b6b3.png"},112:function(e,t,a){e.exports=a.p+"static/media/ZioV8_1.2.7.44073a78.zip"},115:function(e,t,a){e.exports=a(224)},120:function(e,t,a){},183:function(e,t,a){},188:function(e,t){},190:function(e,t){},224:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(40),i=a.n(s),o=(a(120),a(5)),c=a.n(o),u=a(9),l=a(19),p=a(20),d=a(22),m=a(21),f=a(23),_=a(102),h=a.n(_),g=a(12),b=a(4),v=a(65),y=a(66);function w(){var e=Object(v.a)(["\n    width: ","%;\n    height: 100%;\n    background: #6bccf9;\n    border-radius: 8px;\n    transition: width 0.3s ease-in-out;\n"]);return w=function(){return e},e}function x(){var e=Object(v.a)(["\n    width: 50%;\n    height: 20px;\n    background: #2c4251;\n    border-radius: 10px;\n    box-shadow: inset 0 0 5px #000;\n    align-items: center;\n    display: inline-block;\n"]);return x=function(){return e},e}var S=y.a.div(x()),D=y.a.div(w(),(function(e){return e.percentage})),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).clamp=function(e,t,a){return Math.min(Math.max(e,t),a)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.message,r.a.createElement("br",null),r.a.createElement(S,null,r.a.createElement(D,{percentage:this.clamp(0,this.props.percentage,100)})))}}]),t}(n.Component),k=a(108),C=a.n(k),O=(a(125),a(107)),j=a.n(O),F=new TextDecoder("utf-8");function A(e){var t=[];if(null!=e)for(var a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(a++,n=65536+((1023&n)<<10|1023&e.charCodeAt(a)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}var N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleNumberChange=function(e){e.preventDefault(),a.props.on_update_value(e.target.name,e.target.value)},a.handleTextChange=function(e,t){t.preventDefault();var n=a.clampStringLength(t.target.value,e);a.props.on_update_value(t.target.name,n);var r=t.target.name+"_count",s=A(n).length;a.props.on_update_value(r,s)},a.handleDateChange=function(e,t){a.props.on_update_value(e,t)},a.clampStringLength=function(e,t){if(e){for(var a=A(e),n=0,r=0;r<t;r++)if(r<a.length){if(0===a[r]||255===a[r])break;n++}for(var s=new ArrayBuffer(n),i=new DataView(s),o=0;o<n;o++)i.setUint8(o,a[o]);return F.decode(s)}return""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.eeprom_field,n=this.props.current_value,s=!1,i="true"===a.locked;return"text"===a.input_type?(n=this.clampStringLength(n,a.max_bytes),e=r.a.createElement("input",{type:"text",value:n,autoComplete:"off",name:a.name,onChange:function(e){return t.handleTextChange(a.max_bytes,e)},disabled:i}),s=!(!n||n.match(a.regex))):"number"===a.input_type?e=r.a.createElement("input",{type:"number",value:n||"",autoComplete:"off",name:a.name,onChange:this.handleNumberChange,disabled:i}):"count"===a.input_type?e=r.a.createElement("input",{type:"number",value:n||0,autoComplete:"off",name:a.name,onChange:this.handleNumberChange,disabled:!0}):"date"===a.input_type&&(e=r.a.createElement(C.a,{selected:n||"",strictParsing:!0,autoComplete:"off",dateFormat:"yyyy/MM/dd",name:a.name,onChange:function(e){return t.handleDateChange(a.name,e)}})),r.a.createElement("div",null,r.a.createElement("span",{title:a.description},a.full_name," : "),r.a.createElement("span",{title:a.input_desc},e),s&&r.a.createElement("img",{src:j.a,alt:"incorrect input",title:a.input_desc,width:"20",height:"20"}))}}]),t}(n.Component),U=a(58),V=a(225),M=new TextDecoder("utf-8"),T="16d30bc1-f148-49bd-b127-8042df63ded0",B="16d30bc8-f148-49bd-b127-8042df63ded0",I="16d30bcf-f148-49bd-b127-8042df63ded0",R="16d30bd0-f148-49bd-b127-8042df63ded0",L=5,W=6;function Y(e){var t=[];if(null!=e)for(var a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(a++,n=65536+((1023&n)<<10|1023&e.charCodeAt(a)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}function z(e){return new Promise((function(t){return setTimeout(t,e)}))}var P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getBtService=Object(u.a)(c.a.mark((function e(){var t,n,r,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.device.gatt.connect();case 3:return t=e.sent,e.next=6,t.getPrimaryService(T);case 6:return n=e.sent,e.next=9,n.getCharacteristic(B);case 9:return r=e.sent,e.next=12,n.getCharacteristic(I);case 12:return s=e.sent,e.next=15,n.getCharacteristic(R);case 15:i=e.sent,a.setState({device:a.props.device,server:t,service:n,cmdChar:r,flashAddressChar:s,flashDataChar:i}),console.log(a.state),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("error",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),a.readEeprom=Object(u.a)(c.a.mark((function e(){var t,n,r,s,i,o,u,l,p,d,m,f,_,h,v,y,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({eeprom_operation_in_progress:!0,eeprom_progress_percentage:0,progress_bar_message:"reading"}),t=[],n=0;case 3:if(!(n<b.array.length)){e.next=14;break}return e.t0=t,e.next=7,a.getFlashDataArray(b.array[n].address,b.array[n].length);case 7:e.t1=e.sent,t=e.t0.concat.call(e.t0,e.t1),r=(n+1)/b.array.length*100,a.setState({eeprom_progress_percentage:r});case 11:n++,e.next=3;break;case 14:for(console.log("values read from eeprom: ",t),s=0,n=0;n<b.array.length;n++)if("hw_rev"===b.array[n].name)i=new ArrayBuffer(4),(o=new DataView(i)).setUint32(0,t[s],!1),u=o.getUint8(1).toString()+"."+o.getUint8(2).toString()+"."+o.getUint8(3).toString(),a.setState(Object(g.a)({},b.array[n].name,u)),s++;else if("number"===b.array[n].input_type||"count"===b.array[n].input_type)1===b.array[n].length&&(4294967295===t[s]?a.setState(Object(g.a)({},b.array[n].name,"")):a.setState(Object(g.a)({},b.array[n].name,t[s].toString()))),s++;else if("text"===b.array[n].input_type){for(l=b.array[n].length,p=[],d=0;d<l;d++)m=new ArrayBuffer(4),(f=new DataView(m)).setUint32(0,t[s+d],!1),p.push(f.getUint8(0)),p.push(f.getUint8(1)),p.push(f.getUint8(2)),p.push(f.getUint8(3));_=M.decode(Uint8Array.from(p)),a.setState(Object(g.a)({},b.array[n].name,_)),s+=l}else"date"===b.array[n].input_type&&(1===b.array[n].length&&(h=Math.round(t[s]/1e4),v=Math.round(t[s]%1e4/100),y=Math.round(t[s]%100),w=h+"/"+v+"/"+y,w=new Date(w),isNaN(w)?a.setState(Object(g.a)({},b.array[n].name,"")):a.setState(Object(g.a)({},b.array[n].name,w))),s++);a.setState({eeprom_operation_in_progress:!1,eeprom_progress_percentage:100,progress_bar_message:""}),a.setState({erase_function_enabled:!0});case 19:case"end":return e.stop()}}),e)}))),a.writeEeprom=Object(u.a)(c.a.mark((function e(){var t,n,r,s,i,o,u,l,p,d,m,f,_,h,g,v,y,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<b.array.length)){e.next=11;break}if("text"!==b.array[t].input_type){e.next=8;break}if(console.log(a.state[b.array[t].name]),!(n=a.state[b.array[t].name]?a.state[b.array[t].name]:"")||n.match(b.array[t].regex)){e.next=8;break}return alert(b.array[t].full_name+" field is in the incorrect format"),e.abrupt("return");case 8:t++,e.next=1;break;case 11:return e.next=13,a.eraseFlashData();case 13:for(console.log("erase complete"),a.setState({eeprom_operation_in_progress:!0,eeprom_progress_percentage:0,progress_bar_message:"writing"}),r=[],s=0,i=0;i<b.array.length;i++)if("hw_rev"===b.array[i].name)a.state[b.array[i].name]?(o=a.state[b.array[i].name].split("."),u=new ArrayBuffer(4),l=new DataView(u),console.log(o),l.setUint8(0,0),l.setUint8(1,parseInt(o[0])),l.setUint8(2,parseInt(o[1])),l.setUint8(3,parseInt(o[2])),r[s]=l.getUint32(0),console.log(r[s])):r[s]=0,s++;else if("number"===b.array[i].input_type||"count"===b.array[i].input_type)1===b.array[i].length&&(r[s]=a.state[b.array[i].name]),s++;else if("text"===b.array[i].input_type){for(p=b.array[i].length,d=Y(a.state[b.array[i].name]),m=0;m<p;m++){for(f=new ArrayBuffer(4),_=new DataView(f),h=0;h<4;h++)h+4*m<d.length?_.setUint8(h,d[h+4*m]):_.setUint8(h,0);g=_.getUint32(0),r[s+m]=g}s+=p}else"date"===b.array[i].input_type&&(1===b.array[i].length&&(v=new Date(a.state[b.array[i].name]),r[s]=1e4*v.getFullYear()+100*(v.getMonth()+1)+v.getDate()),s++);console.log("values to write to eeprom: ",r),y=0;case 20:if(!(y<r.length)){e.next=29;break}return(void 0===r[y]||isNaN(r[y])||null==r[y])&&(r[y]=4294967295),e.next=24,a.writeFlashDataInt(y,r[y]);case 24:w=20+(y+1)/r.length*80,a.setState({eeprom_progress_percentage:w});case 26:y++,e.next=20;break;case 29:""!==a.state.bt_adv_name&&a.props.update_status_msg("Connected to "+a.state.bt_adv_name),a.setState({eeprom_operation_in_progress:!1,eeprom_progress_percentage:100,progress_bar_message:""});case 31:case"end":return e.stop()}}),e)}))),a.eraseFlashData=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({eeprom_operation_in_progress:!0,eeprom_progress_percentage:0,progress_bar_message:"erasing"}),e.next=4,a.state.cmdChar.writeValue(Uint8Array.of(L));case 4:return e.next=6,a.waitForCmdComplete(5);case 6:a.setState({eeprom_operation_in_progress:!1,eeprom_progress_percentage:100,progress_bar_message:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error erasing flash: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),a.waitForCmdComplete=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t;case 1:return e.next=3,a.getCmdStatus();case 3:if(0!==e.sent){e.next=7;break}return a.setState({eeprom_operation_in_progress:!1,eeprom_progress_percentage:100}),e.abrupt("return",!0);case 7:return e.next=9,z(1e3);case 9:r=(t- --n)/t*100,a.setState({eeprom_operation_in_progress:!0,eeprom_progress_percentage:r});case 12:if(n>0){e.next=1;break}case 13:return console.log("command timed out"),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getCmdStatus=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.state.cmdChar.readValue();case 2:return t=e.sent,e.next=5,t.getUint8(0);case 5:return n=e.sent,a.setState({cmdStatus:n}),e.next=9,n;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),a.getValuesFromFile=Object(u.a)(c.a.mark((function e(){var t,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.have_import_file)for(t=JSON.parse(a.state.importFile),n=0;n<t.array.length;n++)r=b.array[n].name,"date"===b.array[n].input_type?(s=new Date(t.array[n][r]),a.setState(Object(g.a)({},r,s))):a.setState(Object(g.a)({},r,t.array[n][r]));case 1:case"end":return e.stop()}}),e)}))),a.saveValuesToFile=Object(u.a)(c.a.mark((function e(){var t,n,r,s,i,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<b.array.length;n++)"date"===b.array[n].input_type?(r=NaN,Object(U.default)(a.state[b.array[n].name])&&(r=Object(V.default)(a.state[b.array[n].name],"yyyy/MM/dd")),t.push(Object(g.a)({},b.array[n].name,r))):t.push(Object(g.a)({},b.array[n].name,a.state[b.array[n].name]));return s="Eeprom_value_template",i='{"array":'+JSON.stringify(t)+"}",o=new Blob([i],{type:"application/json"}),e.next=7,URL.createObjectURL(o);case 7:u=e.sent,(l=document.createElement("a")).href=u,l.download=s+".json",document.body.appendChild(l),l.click(),document.body.removeChild(l);case 14:case"end":return e.stop()}}),e)}))),a.updateStateFromChild=function(e,t){a.setState(Object(g.a)({},e,t))},a.handleFileInputChange=function(e){var t=new FileReader,n=e.target.files[0];null!=n&&(t.onload=function(e){a.setState({importFile:e.target.result,have_import_file:!0}),console.log(a.state.importFile)},t.readAsText(n))},a.getFlashDataInt=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new DataView(new ArrayBuffer(4))).setUint32(0,t,!1),e.next=5,a.state.flashAddressChar.writeValue(n.buffer);case 5:return e.next=7,a.state.flashDataChar.readValue();case 7:return r=e.sent,e.next=10,r.getUint32(0,!0);case 10:return s=e.sent,e.next=13,s;case 13:return e.abrupt("return",e.sent);case 16:return e.prev=16,e.t0=e.catch(0),console.log("error reading flash: ",e.t0),e.abrupt("return",0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),a.writeFlashDataInt=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new DataView(new ArrayBuffer(4))).setUint32(0,t,!1),e.next=5,a.state.flashAddressChar.writeValue(r.buffer);case 5:return(s=new DataView(new ArrayBuffer(4))).setUint32(0,n,!1),e.next=9,a.state.flashDataChar.writeValue(s.buffer);case 9:return e.next=11,a.state.cmdChar.writeValue(Uint8Array.of(W));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error writing flash: ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}(),a.getFlashDataArray=function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=0;case 2:if(!(s<n)){e.next=10;break}return e.next=5,a.getFlashDataInt(t+s);case 5:i=e.sent,r.push(i);case 7:s++,e.next=2;break;case 10:return e.next=12,r;case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.state={eeprom_operation_in_progress:!1,eeprom_progress_percentage:0,have_import_file:!1,erase_function_enabled:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getBtService()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{onClick:this.readEeprom,disabled:this.state.eeprom_operation_in_progress},"Read All Data"),r.a.createElement("button",{onClick:this.writeEeprom,disabled:this.state.eeprom_operation_in_progress},"Write All Data"),r.a.createElement("button",{onClick:this.eraseFlashData,disabled:!this.state.erase_function_enabled||this.state.eeprom_operation_in_progress},"Erase All Data")),r.a.createElement("div",null,r.a.createElement("input",{type:"file",accept:".json",autoComplete:"off",onChange:this.handleFileInputChange,disabled:this.state.eeprom_operation_in_progress}),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.getValuesFromFile,disabled:this.state.eeprom_operation_in_progress},"Import Values from File"),r.a.createElement("button",{onClick:this.saveValuesToFile,disabled:this.state.eeprom_operation_in_progress},"Export Values to File"))),this.state.eeprom_operation_in_progress&&r.a.createElement(E,{message:this.state.progress_bar_message,percentage:this.state.eeprom_progress_percentage}),b.array.map((function(t){return r.a.createElement(N,{key:t.name,eeprom_field:t,current_value:e.state[t.name],on_update_value:e.updateStateFromChild})})))}}]),t}(n.Component),H=(a(183),a(111)),Z=a.n(H),q=a(70),J=a.n(q),G=a(112),$=a.n(G),Q=a(113),K=a.n(Q),X=new TextDecoder("utf-8"),ee="16d30bc1-f148-49bd-b127-8042df63ded0",te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={statusMessage:"Click Connect to Begin",device_connected:!1,device_connecting:!1,firmware_version:"reading...",device_name:null,dfu_zipFile:null,dfu_manifest:null,dfu_mode_on:!1,dfu_step_msg:"Prepare Firmware File",dfu_step_state:0,dfu_obj:null,dfu_app_image:null,dfu_base_image:null,dfu_mode_connecting:!1},a.pairDevice=function(){a.setState({statusMessage:"Pairing...",device_connecting:!0,pairedDevice:null}),navigator.bluetooth.requestDevice({filters:[{services:["device_information"]}],optionalServices:[ee]}).then((function(e){return e.addEventListener("gattserverdisconnected",a.disconnectDevice),console.log("pairedDevice",e),a.setState({device_name:e.name,pairedDevice:e}),e.gatt.connect()})).then((function(e){return e.getPrimaryService("device_information")})).then((function(e){return e.getCharacteristic("firmware_revision_string")})).then((function(e){return e.readValue()})).then((function(e){a.setState({firmware_version:"v"+X.decode(e),statusMessage:"Connected to "+a.state.device_name}),a.deviceDidConnect()})).catch((function(e){console.error("Connection failed",e),a.disconnectDevice()}))},a.loadDfuFile=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch(t);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("HTTP error "+n.status);case 6:return e.t0=Uint8Array,e.next=9,n.arrayBuffer();case 9:e.t1=e.sent,r=new e.t0(e.t1),K.a.loadAsync(r).then((function(e){console.log(e),a.setState({dfu_zipFile:e});try{return a.state.dfu_zipFile.file("manifest.json").async("string")}catch(t){throw new Error("Unable to find manifest, is this a proper DFU package?")}})).then((function(e){a.setState({dfu_manifest:JSON.parse(e).manifest}),console.log(a.state.dfu_manifest)})).then((function(){return a.getBaseImage()})).then((function(e){a.setState({dfu_base_image:e})})).then((function(){return a.getAppImage()})).then((function(e){a.setState({dfu_app_image:e})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getImage=function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,r=!1,s=void 0,e.prev=3,i=t[Symbol.iterator]();case 5:if(n=(o=i.next()).done){e.next=19;break}if(u=o.value,console.log("checking if the update contains a "+u),!a.state.dfu_manifest[u]){e.next=15;break}return console.log(u+" exists"),l=a.state.dfu_manifest[u],p={type:u,initFile:l.dat_file,imageFile:l.bin_file},e.abrupt("return",a.state.dfu_zipFile.file(p.initFile).async("arraybuffer").then((function(e){return p.initData=e,a.state.dfu_zipFile.file(p.imageFile).async("arraybuffer")})).then((function(e){return p.imageData=e,p})));case 15:console.log("update does not contain a "+u);case 16:n=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),r=!0,s=e.t0;case 25:e.prev=25,e.prev=26,n||null==i.return||i.return();case 28:if(e.prev=28,!r){e.next=31;break}throw s;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}}),e,null,[[3,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}(),a.getBaseImage=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getImage(["softdevice","bootloader","softdevice_bootloader"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getAppImage=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getImage(["application"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updateFirmware=function(){var e=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(a),console.log(n.initData),console.log(n.imageData),e.next=6,t.update(a,n.initData,n.imageData);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("UPDATE ERROR "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}(),a.doDfu=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.state.dfu_step_state){e.next=12;break}return e.next=3,new J.a(Z.a.buf,navigator.bluetooth);case 3:return t=e.sent,a.setState({dfu_obj:t}),a.setState({dfu_progress:0}),a.state.dfu_obj.addEventListener(J.a.EVENT_PROGRESS,(function(e){if("firmware"===e.object){var t=e.currentBytes/e.totalBytes;console.log(t),a.setState({dfu_progress:t})}})),e.next=9,a.loadDfuFile($.a);case 9:a.setState({dfu_step_state:1,dfu_step_msg:"Save app image"}),e.next=13;break;case 12:1===a.state.dfu_step_state?a.setState({dfu_step_state:2,dfu_step_msg:"Select Zio Device"}):2===a.state.dfu_step_state?a.state.dfu_obj.requestDevice(!0).then((function(e){null===e?a.setState({dfu_step_state:3,dfu_step_msg:"Select Dfu Device (1)"}):(a.updateFirmware(a.state.dfu_obj,e,a.state.dfu_app_image),a.setState({dfu_step_state:0,dfu_step_msg:"Updating First Go!"}))})):3===a.state.dfu_step_state&&a.state.dfu_obj.requestDevice(!0).then((function(e){null===e?a.setState({dfu_step_state:3,dfu_step_msg:"Select Dfu Device (2)"}):(a.updateFirmware(a.state.dfu_obj,e,a.state.dfu_app_image),a.setState({dfu_step_state:3,dfu_step_msg:"Updating Second Go!"}))}));case 13:case"end":return e.stop()}}),e)}))),a.deviceDidConnect=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({device_connecting:!1,device_connected:!0,reading_eeprom:!0,reading_eeprom_progress:0});case 1:case"end":return e.stop()}}),e)}))),a.disconnectDevice=function(){null!=a.state.pairedDevice&&(a.state.pairedDevice.gatt.disconnect(),console.log("Device "+a.state.device_name+" is disconnected")),a.setState({device_connected:!1,device_connecting:!1,statusMessage:"Click Connect to Begin",device_name:null,pairedDevice:null})},a.updateStatusMsg=function(e){a.setState({statusMessage:e})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){console.log("Zio Setup Centre v0.16.2")}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Welcome to the Zio Setup Centre"),r.a.createElement("div",null,this.state.statusMessage),r.a.createElement("br",null)),r.a.createElement("div",{className:"connect-options"},!this.state.device_connected&&!this.state.device_connecting&&r.a.createElement("button",{className:"button",onClick:this.pairDevice},"Connect"),!this.state.device_connected&&this.state.device_connecting&&r.a.createElement("img",{src:h.a,alt:"connecting"}),this.state.device_connected&&!this.state.device_connecting&&r.a.createElement("button",{className:"button",onClick:this.disconnectDevice},"Disconnect")),r.a.createElement("div",{className:"firmware-updater"},this.state.device_connected&&r.a.createElement("div",null,r.a.createElement("h2",null,"Firmware Version: ",this.state.firmware_version),r.a.createElement("p",null,"For an online tool to update the firmware version please ",r.a.createElement("a",{href:"https://thegecko.github.io/web-bluetooth-dfu/examples/web.html",target:"_blank",rel:"noopener noreferrer"},"click here")),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{className:"eeprom-fields"},this.state.device_connected&&r.a.createElement(P,{device:this.state.pairedDevice,update_status_msg:this.updateStatusMsg})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"If you have any problems, ",r.a.createElement("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSdo2MIEHSg9ZsYYtN0h7M2preLRf5cg_PhW9mownfdtNeCjAw/viewform?usp=sf_link",target:"_blank",rel:"noopener noreferrer"}," click here")," to report to Zio Health."),r.a.createElement("br",null),r.a.createElement("p",null,"Last Updated 23rd Aug 2020"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(e){e.exports=JSON.parse('{"array":[{"name":"bt_adv_name_count","address":0,"length":1,"full_name":"Bluetooth Advertising Name Length","description":"The count of characters in the Advertising name","input_type":"count","input_desc":"Number from 0 to 31"},{"name":"bt_adv_name","address":1,"length":8,"full_name":"Bluetooth Advertising Name","description":"The name displayed when advertising","input_type":"text","input_desc":"Max 31-character UTF-8 string","max_bytes":31,"regex":".*"},{"name":"serial_count","address":9,"length":1,"full_name":"Serial Number String Length","description":"The count of characters in the Serial Number String","input_type":"count","input_desc":"Number from 0 to 16"},{"name":"serial","address":10,"length":4,"full_name":"Serial Number","description":"Unique device identifier","input_type":"text","input_desc":"Max 16-character UTF-8 string","max_bytes":16,"regex":".*"},{"name":"model_count","address":14,"length":1,"full_name":"Device Model String Length","description":"The count of characters in the Device Model String","input_type":"count","input_desc":"Number from 0 to 16"},{"name":"model","address":15,"length":4,"full_name":"Device Model","description":"Identifies the Product the device is in","input_type":"text","input_desc":"Max 16-character UTF-8 string","max_bytes":16,"regex":".*"},{"name":"hw_rev","address":19,"length":1,"full_name":"Hardware Revision","description":"The HW revision of the PCB","input_type":"text","input_desc":"Major#.minor#.patch#, e.g. 8.6.0","max_bytes":11,"regex":"^((?:[0-9][0-9]?[0-9]?|0|255)\\\\.)((?:[0-9][0-9]?[0-9]?|0|255)\\\\.)((?:[0-9][0-9]?[0-9]?|0|255))$"},{"name":"manufacturer_id","address":20,"length":1,"full_name":"Manufacturer ID","description":"TBD","input_type":"number","input_desc":"32-bit number"},{"name":"organization_id","address":21,"length":1,"full_name":"Organization ID","description":"TBD","input_type":"number","input_desc":"32-bit number"},{"name":"batch_id","address":22,"length":1,"full_name":"Zio Batch ID","description":"Traceable batch number assigned to the board","input_type":"number","input_desc":"32-bit number"},{"name":"first_test_date","address":23,"length":1,"full_name":"First Tested Date","description":"The date which the device was first setup","input_type":"date","input_desc":"decimal date format YYYYMMDD"},{"name":"last_test_date","address":24,"length":1,"full_name":"Last Tested Date","description":"The date which the device was most recently tested","input_type":"date","input_desc":"decimal date format YYYYMMDD"},{"name":"batt_install_date","address":25,"length":1,"full_name":"Battery Install Date","description":"The date which the battery was installed","input_type":"date","input_desc":"decimal date format YYYYMMDD"},{"name":"nfc_on","address":26,"length":1,"full_name":"NFC Advertising On","description":"Enables NFC Bluetooth Advertising","input_type":"number","input_desc":"1 = NFC Enabled, 0 = NFC Disabled, Else = defined in firmware","locked":"true"},{"name":"cart_detect_off","address":27,"length":1,"full_name":"Cart Detection Bypass","description":"Removes the Cartridge detection requirement","input_type":"number","input_desc":"1 = Bypass Detection, 0 = Normal Operation, Else = defined in firmware"},{"name":"snr_off","address":28,"length":1,"full_name":"SNR Off","description":"Skips the SNR frequency tests","input_type":"number","input_desc":"1 = SNR not performed, 0 = SNR is performed, Else = defined in firmware"},{"name":"raw_data","address":29,"length":1,"full_name":"Output Raw data","description":"Outputs unfiltered data in the data packet","input_type":"number","input_desc":"1 = Output Not Filtered, 0 = Output Filtered, Else = defined in firmware"},{"name":"timeout","address":30,"length":1,"full_name":"Standby Timeout (s)","description":"The timeout in seconds before the device turns itself off","input_type":"number","input_desc":"0 = no time out, Else = time in seconds"},{"name":"start_volt_opt_on","address":31,"length":1,"full_name":"Start Voltage Optimization Switch","description":"Enables \u2018Start Voltage Optimization\u2019","input_type":"number","input_desc":"1 = Start Volt Optimization Enabled, 0 = Start Volt Optimization Disabled, Else = defined in firmware"},{"name":"swv_average_on","address":32,"length":1,"full_name":"SWV Averaging Switch","description":"Enables \u2018SWV Averaging\u2019","input_type":"number","input_desc":"1 = SWV Averaging Enabled, 0 = SWV Averaging Disabled, Else = defined in firmware"},{"name":"balance_time_ms","address":33,"length":1,"full_name":"Electrode Balance Time (ms)","description":"The time in milliseconds that the device \'balances\' itself in between every SWV. The device \'balances\' by setting the Electrode to 1.5V and waiting the given time","input_type":"number","input_desc":"0 = no balancing occurs, 10000+ = no balancing occurs, Else = time in milliseconds"},{"name":"sweep_reversal_on","address":34,"length":1,"full_name":"SWV Sweep Reversal Switch","description":"Enables High-to-Low SWV Sweeping","input_type":"number","input_desc":"1 = High-to-Low SWV Sweep, 0 = Low-to-High SWV Sweep, Else = defined in firmware"}]}')}},[[115,1,2]]]);
//# sourceMappingURL=main.9567bebd.chunk.js.map